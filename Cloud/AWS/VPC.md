# **VPC**

<br>

### **VPC(Virtual Private Cloud)란** 독립적인 **가상의 네트워크 공간**으로, 사용자의 설정에 따라 자유롭게 구성할 수 있는 공간을 의미한다. 사용자는 서브넷 생성, 라우팅 테이블, 네트워크 게이트웨이 구성 등 네트워킹 환경을 사용자가 원하는 대로 제어할 수 있다.

### 다른 고객과 논리적으로 완벽히 격리된 네트워크 공간을 제공하며, 가상 네트워크에서 AWS 리소스를 만드는 데 사용하는 리소스이다.

<br><br>

---

<br>

## **VPC 생성에 필요한 구성요소**

<br>

+ ### **Region**

    AWS 데이터 센터의 물리적 위치를 리전이라고 하며, 각 Amazon EC2 리전은 세계 각지 여러 곳에서 호스팅하며 이를 통해 최종 사용자에게 가까운 여러 위치에 컴퓨팅, 리소스를 배치할 수 있다.

<br>

+ ### **Availability Zone**

    가용 영역은 실제 IDC(Internet Data Center)단위로써, AWS 정책에 따라 하나의 region 안에는 **최소 2개 이상의 AZ**가 존재한다.
    복수의 가용 영역에 인스턴스를 배포할 시, 하나의 인스턴스에 장애가 발생해도 다른 가용 영역의 인스턴스가 장애가 발생한 인스턴스 관련 요청을 처리할 수 있도록 애플리케이션을 설계할 수 있다.

<br>


+ ### **Subnet**

    VPC 주소를 쪼갠 네트워크 주소이다.
    AWS에서는, VPC 하위에 추가로 생성하고 어떤 `AZ`에 위치시킬지 설정해야 하며, 하나의 가용영역(AZ) 내에서만 존재해야 하며 한 서브넷을 여러 영역에 확장하여 생성할 수 없다.

<br>

> 각 서브넷 CIDR 블록에서 첫 4개의 IP 주소와, 마지막 IP 주소는 예약되어 있어서, 사용할 수 없다. 예를 들어, `10.0.0.0/24` CIDR 블록의 서브넷에는 아래 5개의 IP 주소가 예약 되어 있다.
> + 10.0.0.0 : 네트워크 주소
> + 10.0.0.1 : AWS에서 VPC 라우터용으로 예약한 주소
> + 10.0.0.2 : DNS 서버의 IP 주소
> + 10.0.0.3 : AWS에서 앞으로 사용하려고 예약한 주소
> + 10.0.0.255 : 네트워크 브로드캐스트 주소

<br>
<br>

+ ### **Internet Gateway**

    인터넷 게이트웨이는 VPC의 인스턴스오, 인터넷 간 통신을 할 수 있게 해주며, 인터넷으로 데이터를 보내려 한다면 서브넷의 라우팅 테이블에 인터넷 게이트웨이를 추가해야 한다.
    서브넷이 인터넷 게이트웨이로 향하는 라우팅이 있는 경우, `Public Subnet` 라고 하며, 없을 경우 `Private Subnet` 이라고 한다.

<br>

+ ### **Route Table**

    VPC를 만들면 가상의 Router가 만들어 지는데, 관리자는 Route Table를 수정하여 트래픽 흐름을 제어할 수 있다.

<br>

+ ### **Secutiry Group**

    보안 그룹은 방화벽 정책 적용 툴로, 이 툴을 사용해 입/출력을 허용할 IP와, PORT 번호를 지정할 수 있다. 인스턴스는 반드시 하나 이상의 보안 그룹을 포함해야 한다.


<br>

+ ### **Network ACL**

    `NACL`은 Secutiry Group과 같은 방화벽 정책 적용 툴인데, Secutiry Group은 **인스턴스 단위**의 방화벽 정책 툴인 반연 `NACL`은 **서브넷 단위**의 방화벽 정책 툴이다.

<br><br>

---

<br>

## **VPC 피어링**

<br>

VPC 피어링은 프라이빗 IPv4 주소 또는 IPv6 주소를 사용하여 두 VPC 간에 트래픽을 라우팅할 수 있는 **두 VPC 간의 네트워킹 연결**이다.

<br>

동일한 네트워크에 속하는 경우처럼 VPC의 인스턴스가 서로 통신할 수 있게 되며, 다른 AWS 계정의 VPC와 피어링 할 수 있으며, 서로 다른 Region 간에도 피어링할 수 있다.